@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
    scroll-behavior: smooth;
  }

  body {
    @apply bg-gradient-to-br from-slate-50 to-blue-50;
    min-height: 100vh;
  }

  * {
    @apply antialiased;
  }
}

@layer components {
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-colors duration-200;
  }

  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  .btn-secondary {
    @apply bg-gray-200 text-gray-900 hover:bg-gray-300;
  }

  .card {
    @apply bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20;
    @apply hover:shadow-xl transition-all duration-300;
  }

  /* 自定义阴影效果 */
  .shadow-3xl {
    box-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.25),
                0 25px 25px -5px rgba(0, 0, 0, 0.1);
  }

  /* 淡入动画 */
  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: scale(0.9) translateY(20px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  .input {
    @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500;
  }

  /* 书籍展示区域 */
  .book-showcase {
    @apply grid gap-8 w-full max-w-7xl mx-auto;
    grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
    @apply md:gap-10;
  }

  /* 书籍卡片 - 符合真实书籍比例 3:4 */
  .book-card {
    @apply relative block no-underline;
    width: 100%;
    max-width: 200px;
    aspect-ratio: 3/4;
  }

  .book-card-inner {
    @apply relative w-full h-full rounded-2xl overflow-hidden;
    @apply bg-gradient-to-br from-white to-gray-50;
    @apply shadow-lg border border-white/30;
    @apply transition-all duration-500 ease-out;
    @apply hover:shadow-2xl hover:scale-[1.03] hover:-translate-y-2;
    @apply hover:border-white/50;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }

  .book-card-inner:hover {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15), 0 25px 25px -12px rgba(0, 0, 0, 0.1);
  }

  .book-cover-image {
    @apply w-full h-full object-cover transition-all duration-500;
    filter: brightness(1.05) contrast(1.05) saturate(1.1);
  }

  .book-card:hover .book-cover-image {
    @apply blur-sm;
  }

  /* 悬浮覆盖层 */
  .book-overlay {
    @apply absolute inset-0 bg-gradient-to-t from-black/85 via-black/30 to-transparent text-white;
    @apply flex flex-col justify-between p-6 transition-all duration-500 ease-out;
    @apply translate-y-full opacity-0;
  }

  .book-card:hover .book-overlay {
    @apply translate-y-0 opacity-100;
  }

  .book-info {
    @apply flex-1 flex flex-col justify-center;
  }

  .book-title {
    @apply text-xl font-bold mb-4 line-clamp-2 leading-tight;
    @apply text-white drop-shadow-lg;
  }

  .book-author {
    @apply text-base text-gray-200 mb-3 drop-shadow-md;
  }

  .book-category {
    @apply text-sm text-gray-300 bg-black/40 px-3 py-2 rounded-full;
    @apply backdrop-blur-sm border border-white/30 font-medium;
  }

  .book-info > * {
    @apply transition-all duration-300 ease-out;
    @apply opacity-0 transform translate-y-3;
  }

  .book-card:hover .book-info > * {
    @apply opacity-100 translate-y-0;
  }

  .book-card:hover .book-title {
    transition-delay: 50ms;
  }

  .book-card:hover .book-author {
    transition-delay: 150ms;
  }

  .book-card:hover .book-category {
    transition-delay: 250ms;
  }

  .book-badges .rating-image,
  .book-badges .badge {
    transition-delay: 100ms;
  }

  /* 状态标记 */
  .book-badges {
    @apply absolute top-3 inset-x-3 flex justify-between items-start z-10;
  }

  .book-badges-left {
    @apply flex flex-row gap-2;
  }

  .book-badges-right {
    @apply flex flex-row gap-2;
  }

  .badge {
    @apply px-2 py-1 rounded-full text-xs font-semibold flex items-center gap-1;
    @apply backdrop-blur-sm border border-white/30 shadow-md;
    @apply transition-all duration-300 hover:scale-105 hover:shadow-lg;
    box-shadow: 0 2px 8px -2px rgba(0, 0, 0, 0.15);
  }

  .badge-rating {
    @apply text-white font-bold;
  }

  .badge-masterpiece {
    @apply bg-purple-600;
  }

  .badge-excellent {
    @apply bg-green-600;
  }

  .badge-popular {
    @apply bg-blue-600;
  }

  .badge-worth {
    @apply bg-yellow-600;
  }

  .badge-mixed {
    @apply bg-orange-600;
  }

  .badge-poor {
    @apply bg-red-600;
  }

  .badge-default {
    @apply bg-gray-600;
  }

  /* 评分图片样式 */
  .rating-badge-container {
    @apply relative;
  }

  .rating-image {
    @apply h-6 w-auto object-contain shadow-lg;
    @apply transition-all duration-300 hover:scale-110 hover:shadow-xl;
    max-height: 24px;
    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.4));
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.8);
    border-radius: 4px;
    padding: 2px;
    backdrop-filter: blur(4px);
  }

  .rating-image.finished-reading {
    border-radius: 6px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.9);
  }

  /* 分页样式 */
  .pagination-container {
    @apply flex justify-center mt-16 mb-12;
  }

  .pagination {
    @apply flex items-center gap-2 bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl;
    @apply border border-white/30;
  }

  .page-btn {
    @apply px-5 py-3 border border-gray-200 rounded-xl font-medium text-gray-700;
    @apply bg-white/60 backdrop-blur-sm;
    @apply hover:border-transparent hover:shadow-lg hover:scale-105;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    @apply disabled:hover:bg-white/60 disabled:hover:shadow-none disabled:hover:scale-100;
    @apply transition-all duration-300 ease-out;
    box-shadow: 0 2px 8px -2px rgba(0, 0, 0, 0.1);
  }

  .page-btn:hover:not(:disabled) {
    background: rgb(2 132 199);
    color: white;
  }

  .page-numbers {
    @apply flex items-center gap-1 mx-4;
  }

  .page-number {
    @apply px-4 py-3 border border-gray-200 rounded-xl font-medium text-gray-700;
    @apply bg-white/60 backdrop-blur-sm;
    @apply hover:border-transparent hover:shadow-lg hover:scale-105;
    @apply transition-all duration-300 ease-out;
    box-shadow: 0 2px 8px -2px rgba(0, 0, 0, 0.1);
  }

  .page-number:hover {
    background: rgb(2 132 199);
    color: white;
  }

  .page-number.active {
    @apply border-transparent shadow-lg scale-105;
    background: rgb(2 132 199);
    color: white;
    box-shadow: 0 8px 20px -4px rgba(2, 132, 199, 0.4);
  }

  .page-ellipsis {
    @apply px-3 text-gray-500 font-medium;
  }

  .page-jump {
    @apply flex items-center gap-3 ml-4;
  }

  .page-input {
    @apply w-20 px-3 py-3 border border-gray-200 rounded-xl text-center text-sm font-medium text-gray-700;
    @apply bg-white/60 backdrop-blur-sm;
    @apply focus:bg-white focus:shadow-lg;
    @apply transition-all duration-200;
  }

  .page-input:focus {
    outline: 2px solid rgb(2 132 199);
    border-color: rgb(2 132 199);
    box-shadow: 0 0 0 2px rgba(2, 132, 199, 0.2);
  }

  .page-confirm {
    @apply px-4 py-3 border border-transparent rounded-xl text-sm font-medium text-white;
    @apply hover:shadow-lg hover:scale-105;
    @apply transition-all duration-300 ease-out;
    background: rgb(2 132 199);
  }

  .page-confirm:hover {
    background: rgb(2 132 199 / 0.9);
  }

  /* 响应式设计 */
  @media (max-width: 1536px) {
    .book-showcase {
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      @apply gap-7;
    }
  }

  @media (max-width: 1280px) {
    .book-showcase {
      grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
      @apply gap-6;
    }

    .container {
      @apply px-6;
    }
  }

  @media (max-width: 1024px) {
    .book-showcase {
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 1.5rem;
    }

    .book-overlay {
      @apply p-5;
    }

    .pagination {
      @apply p-4;
    }

    .page-numbers {
      @apply mx-2;
    }
  }

  @media (max-width: 768px) {
    .book-showcase {
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1.25rem;
    }

    .book-card-inner {
      @apply rounded-xl;
    }

    .book-overlay {
      @apply p-4;
    }

    .book-title {
      @apply text-base leading-tight mb-3;
    }

    .book-author {
      @apply text-sm mb-2;
    }

    .book-category {
      @apply text-sm px-2.5 py-1.5;
    }

    .pagination {
      @apply flex-wrap gap-1 p-3 mx-2;
      @apply justify-center;
    }

    .page-btn {
      @apply px-3 py-2 text-sm text-gray-700;
    }

    .page-btn:hover:not(:disabled) {
      background: rgb(2 132 199);
      color: white;
    }

    .page-number {
      @apply px-3 py-2 text-sm text-gray-700;
    }

    .page-number:hover {
      background: rgb(2 132 199);
      color: white;
    }

    .page-number.active {
      background: rgb(2 132 199);
      color: white;
    }

    .page-numbers {
      @apply mx-1 gap-0.5;
    }

    .page-jump {
      @apply w-full justify-center mt-3 gap-2;
    }

    .page-input {
      @apply w-16;
    }

    .book-badges {
      @apply top-1.5 inset-x-1.5;
    }

    .rating-image {
      @apply h-4 w-auto object-contain;
      max-height: 16px;
      filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.5));
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.7);
      border-radius: 2px;
      padding: 1px;
      backdrop-filter: blur(2px);
    }

    .rating-image.finished-reading {
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.95);
    }

    .badge {
      @apply px-1 py-0.5 text-xs;
    }
  }

  @media (max-width: 640px) {
    .book-showcase {
      grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    }

    .container {
      @apply px-4;
    }

    .book-title {
      @apply text-xs;
    }

    .book-badges {
      @apply top-2 inset-x-2;
    }

    .rating-image {
      @apply h-5 w-auto object-contain;
      max-height: 20px;
      filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.4));
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.7);
      border-radius: 3px;
      padding: 1px;
      backdrop-filter: blur(3px);
    }

    .rating-image.finished-reading {
      border-radius: 4px;
      background: rgba(255, 255, 255, 0.95);
    }

    .badge {
      @apply px-1.5 py-0.5 text-xs;
    }

    .pagination {
      @apply p-2 mx-1;
    }

    .page-btn {
      @apply px-2 py-1.5 text-xs text-gray-700;
    }

    .page-btn:hover:not(:disabled) {
      background: rgb(2 132 199);
      color: white;
    }

    .page-number {
      @apply px-2.5 py-1.5 text-xs text-gray-700;
    }

    .page-number:hover {
      background: rgb(2 132 199);
      color: white;
    }

    .page-number.active {
      background: rgb(2 132 199);
      color: white;
    }
  }

  @media (max-width: 480px) {
    .book-showcase {
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
    }

    .book-card {
      max-width: none;
    }

    .book-overlay {
      @apply p-3;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.4) 50%, transparent 100%);
    }

    .book-info {
      @apply justify-start;
    }

    .book-title {
      @apply text-sm mb-1 line-clamp-2 font-bold;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
    }

    .book-badges {
      @apply top-1.5 inset-x-1.5;
    }

    .rating-image {
      @apply h-4 w-auto object-contain;
      max-height: 16px;
      filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.5));
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.7);
      border-radius: 2px;
      padding: 1px;
      backdrop-filter: blur(2px);
    }

    .rating-image.finished-reading {
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.95);
    }

    .badge {
      @apply px-1 py-0.5 text-xs;
    }

    .pagination {
      @apply flex-col gap-2 p-3;
    }

    .page-numbers {
      @apply justify-center;
    }

    .page-jump {
      @apply mt-2;
    }
  }

  /* 搜索界面优化 */
  .search-container {
    @apply flex flex-col sm:flex-row gap-4 items-stretch sm:items-center;
  }

  .search-input-container {
    @apply relative flex-1 max-w-md;
  }

  .search-input {
    @apply w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl;
    @apply focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
    @apply bg-white/80 backdrop-blur-sm transition-all duration-200;
    @apply placeholder-gray-500;
  }

  .search-input:focus {
    @apply shadow-lg bg-white;
  }

  .search-clear-btn {
    @apply absolute inset-y-0 right-0 pr-3 flex items-center;
    @apply text-gray-400 hover:text-gray-600 transition-colors duration-200;
  }

  .filter-container {
    @apply flex items-center gap-2;
  }

  .filter-select {
    @apply px-3 py-2 border border-gray-300 rounded-lg;
    @apply focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
    @apply bg-white/80 backdrop-blur-sm transition-all duration-200;
  }

  .search-status {
    @apply text-sm text-gray-600 bg-blue-50 px-3 py-2 rounded-lg border;
    @apply flex items-center gap-2;
  }

  @media (max-width: 640px) {
    .search-container {
      @apply flex-col gap-3;
    }

    .search-input-container {
      @apply max-w-none;
    }

    .filter-container {
      @apply justify-between;
    }

    .search-status {
      @apply justify-center;
    }
  }

  /* 骨架屏动画效果 */
  @keyframes pulse-shimmer {
    0% {
      transform: translateX(-100%) skewX(-12deg);
    }
    100% {
      transform: translateX(200%) skewX(-12deg);
    }
  }

  .animate-pulse-shimmer {
    animation: pulse-shimmer 1.5s ease-in-out infinite;
  }
}